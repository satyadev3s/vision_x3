<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Algoplay Login</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%}

body{
    font-family:'Poppins',sans-serif;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:url("https://tse1.mm.bing.net/th/id/OIP.USJ-O_3Ew8s5_RIFjDjCxQHaHa?pid=Api&P=0&h=220")
    no-repeat center/cover;
    color:#fff;
}

/* WRAPPER */
.wrapper{
    width:950px;
    max-width:95%;
    height:550px;
    display:flex;
    border-radius:24px;
    overflow:hidden;
    background:linear-gradient(135deg,rgba(18,18,39,.9),rgba(26,20,61,.92));
    backdrop-filter:blur(18px);
    border:1px solid rgba(155,126,255,.5);
    box-shadow:0 30px 80px rgba(0,0,0,.65);
}

/* LEFT */
.left{
    width:45%;
    padding:50px 45px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    background:rgba(7,6,24,.92);
}

.left h2{font-size:32px;margin-bottom:6px}
.left p{font-size:13px;opacity:.85}

.input-group{
    margin-top:28px;
    display:flex;
    flex-direction:column;
    gap:14px;
}

.input-field label{
    font-size:11px;
    opacity:.7;
}

.input-field input{
    width:100%;
    background:rgba(18,24,40,.9);
    border:1px solid rgba(141,162,255,.6);
    padding:11px 12px;
    border-radius:9px;
    color:#fff;
}

.input-field input:focus{
    outline:none;
    border-color:#7dd3fc;
    box-shadow:0 0 0 1px rgba(56,189,248,.7),
               0 0 16px rgba(56,189,248,.5);
}

.btn{
    margin-top:18px;
    padding:12px;
    border:none;
    border-radius:999px;
    background:linear-gradient(135deg,#22d3ee,#6366f1,#ec4899);
    color:#fff;
    cursor:pointer;
}

.btn:hover{transform:translateY(-2px)}

.signup{
    margin-top:22px;
    font-size:12px;
}

.signup button{
    margin-left:6px;
    padding:6px 16px;
    border-radius:999px;
    border:1px solid rgba(129,140,248,.7);
    background:transparent;
    color:#fff;
    cursor:pointer;
}

/* RIGHT */
.right{
    width:55%;
    padding:50px;
    background:rgba(15,23,42,.85);
}

.badge{
    display:inline-flex;
    gap:6px;
    padding:5px 12px;
    border-radius:999px;
    border:1px solid rgba(129,140,248,.8);
    font-size:11px;
}

.dot{
    width:8px;height:8px;border-radius:50%;
    background:#22c55e;
}

.right h1{font-size:34px;margin-top:18px}
.right h3{font-size:20px;color:#a5b4fc;margin-top:4px}
.right p{font-size:13px;max-width:320px}

.tags{margin-top:16px;display:flex;gap:8px;flex-wrap:wrap}
.tag{
    padding:5px 10px;
    border-radius:999px;
    border:1px solid rgba(148,163,255,.7);
    font-size:11px;
}
</style>
</head>

<body>

<div class="wrapper">

<!-- LEFT -->
<div class="left">
    <h2>Login</h2>
    <p>Enter your Algoplay credentials</p>

    <div class="input-group">
        <div class="input-field">
            <label>Username</label>
            <input id="username" placeholder="Enter your username">
        </div>
        <div class="input-field">
            <label>Password</label>
            <input id="password" type="password" placeholder="Enter your password">
        </div>
    </div>

    <button class="btn" id="loginBtn">Login</button>

    <div class="signup">
        New to Algoplay?
        <button onclick="location.href='signuppage.html'">Create account</button>
    </div>
</div>

<!-- RIGHT -->
<div class="right">
    <div class="badge">
        <span class="dot"></span>
        <span>Welcome back</span>
    </div>

    <h1>Level up your logic.</h1>
    <h3>Practice. Play. Master.</h3>
    <p>Solve challenges, visualize algorithms, and grow your skills.</p>

    <div class="tags">
        <span class="tag">DSA</span>
        <span class="tag">Visuals</span>
        <span class="tag">Leaderboard</span>
    </div>
</div>

</div>

<script>
document.getElementById("loginBtn").addEventListener("click", async () => {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    if(!username || !password){
        alert("Please fill all fields");
        return;
    }

    try{
        const res = await fetch("http://localhost:5000/Login",{
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body:JSON.stringify({
                identifier: username,
                password: password,
                role: "student"
            })
        });

        const data = await res.json();

        if(!res.ok){
            alert(data.error);
            return;
        }

        sessionStorage.setItem("student_id", data.student.id);
        sessionStorage.setItem("student_name", data.student.name);

        window.location.href = "maindashboard.html";

    }catch(err){
        alert("Server error");
        console.error(err);
    }
});
</script>

</body>
</html>
