<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tech ‚Äî Level 2</title>
<style>
:root{--bg:linear-gradient(135deg,#2193b0,#6dd5ed);}
html,body{height:100%;margin:0;font-family:Segoe UI}
#app{height:100vh;display:flex;flex-direction:column;background:var(--bg);color:#fff}
.header{padding:20px;background:linear-gradient(90deg,#7c3aed,#6c62ff);display:flex;justify-content:space-between;align-items:center;font-weight:900}
.progress-bar{height:6px;background:rgba(255,255,255,.18)}
.progress-fill{height:100%;width:25%;transition:width .35s;background:#ffd54f}
.content{padding:22px;flex:1;overflow:auto}
.question-text{font-size:1.6rem;font-weight:900;margin-bottom:18px}
.answer-button{display:block;width:100%;padding:14px;margin-bottom:12px;border-radius:12px;border:none;background:linear-gradient(135deg,#fff,#e6e6e6);color:#111;font-weight:800;cursor:pointer}
.answer-button:disabled{opacity:.95}
.correct{background:#27ae60;color:#fff}
.incorrect{background:#e74c3c;color:#fff}
.footer{display:flex;justify-content:space-between;padding:16px;background:linear-gradient(90deg,rgba(0,0,0,.06),rgba(0,0,0,.02))}
.btn-small{padding:10px 14px;border-radius:10px;border:none;font-weight:900;color:#fff;cursor:pointer}
.back{background:linear-gradient(135deg,#558B2F,#33691e)}
.next{background:linear-gradient(135deg,#1976D2,#1565C0);display:none}
.next.show{display:inline-block}
</style>
</head>
<body>
<div id="app">
  <div class="header">
    <div id="question-number">üé® 1. Question</div>
    <div>‚è≥ <span id="timer">30</span>s</div>
  </div>

  <div class="progress-bar"><div id="progress-fill" class="progress-fill" style="width:25%"></div></div>

  <div class="content">
    <div id="question-text" class="question-text">Loading‚Ä¶</div>
    <button class="answer-button" data-answer="a" onclick="selectAnswer(this,'a')"></button>
    <button class="answer-button" data-answer="b" onclick="selectAnswer(this,'b')"></button>
    <button class="answer-button" data-answer="c" onclick="selectAnswer(this,'c')"></button>
    <button class="answer-button" data-answer="d" onclick="selectAnswer(this,'d')"></button>
  </div>

  <div class="footer">
    <div>Score: <strong id="current-score">0</strong>/<span id="total-questions">4</span></div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="back-button" class="btn-small back" onclick="goBack()" disabled>‚Üê Back</button>
      <button id="next-button" class="btn-small next" onclick="goNext()">Next ‚Üí</button>
    </div>
  </div>
</div>

<script>
const TIME_PER_Q = 30;
const LEVEL = 2;
const questions = [
  { number:1, text:"What does CSS stand for?", answers:[{l:'a',t:'Computer Style Sheets'},{l:'b',t:'Cascading Style Sheets'},{l:'c',t:'Creative Style System'},{l:'d',t:'Code Styling Standard'}], correct:'b', user:null, remaining:TIME_PER_Q },
  { number:2, text:"Which property changes text color?", answers:[{l:'a',t:'font-size'},{l:'b',t:'color'},{l:'c',t:'background'},{l:'d',t:'text-style'}], correct:'b', user:null, remaining:TIME_PER_Q },
  { number:3, text:"How do you select an element with id 'header'?", answers:[{l:'a',t:'.header'},{l:'b',t:'#header'},{l:'c',t:'header'},{l:'d',t:'*header'}], correct:'b', user:null, remaining:TIME_PER_Q },
  { number:4, text:"Which property controls outside spacing?", answers:[{l:'a',t:'margin'},{l:'b',t:'padding'},{l:'c',t:'gap'},{l:'d',t:'spacing'}], correct:'a', user:null, remaining:TIME_PER_Q }
];

let state={ idx:0, timerInterval:null };

const DOM={ qText:document.getElementById('question-text'), buttons:document.querySelectorAll('.answer-button'), nextBtn:document.getElementById('next-button'), backBtn:document.getElementById('back-button'), score:document.getElementById('current-score'), total:document.getElementById('total-questions'), qNum:document.getElementById('question-number'), progress:document.getElementById('progress-fill'), timer:document.getElementById('timer') };

function render(){ const q=questions[state.idx]; DOM.qNum.textContent=`üé® ${q.number}. Question`; DOM.qText.textContent=q.text; DOM.total.textContent = questions.length; DOM.score.textContent = questions.filter(x=>x.user===x.correct).length; DOM.progress.style.width = (((state.idx+1)/questions.length)*100) + '%'; DOM.buttons.forEach((btn,i)=>{ const a=q.answers[i]; btn.textContent = `${a.l}) ${a.t}`; btn.dataset.answer = a.l; btn.classList.remove('correct','incorrect'); btn.disabled = q.user !== null; btn.style.opacity='1'; if(q.user!==null){ if(a.l===q.correct) btn.classList.add('correct'); else if(a.l===q.user) btn.classList.add('incorrect'); else btn.style.opacity='0.5'; } }); DOM.nextBtn.classList[q.user!==null?'add':'remove']('show'); DOM.backBtn.disabled = state.idx===0; DOM.timer.textContent = q.remaining; startTimer(); }

function startTimer(){ stopTimer(); const q=questions[state.idx]; DOM.timer.textContent = q.remaining; if(q.remaining<=0){ onTimeUp(); return; } state.timerInterval = setInterval(()=>{ q.remaining--; DOM.timer.textContent = q.remaining; if(q.remaining<=0){ stopTimer(); onTimeUp(); } },1000); }

function stopTimer(){ if(state.timerInterval){ clearInterval(state.timerInterval); state.timerInterval=null; } }

function onTimeUp(){ const q=questions[state.idx]; if(q.user===null) q.user='timeout'; DOM.buttons.forEach(b=>b.disabled=true); const correctBtn=[...DOM.buttons].find(b=>b.dataset.answer===q.correct); if(correctBtn) correctBtn.classList.add('correct'); setTimeout(()=> advanceOrFinish(),700); }

function selectAnswer(btn,choice){ const q=questions[state.idx]; if(q.user!==null) return; stopTimer(); q.user = choice; DOM.buttons.forEach(b=>b.disabled=true); if(choice===q.correct) btn.classList.add('correct'); else { btn.classList.add('incorrect'); const correctBtn=[...DOM.buttons].find(b=>b.dataset.answer===q.correct); if(correctBtn) correctBtn.classList.add('correct'); } DOM.score.textContent = questions.filter(x=>x.user===x.correct).length; setTimeout(()=> DOM.nextBtn.classList.add('show'),400); }

function goNext(){ stopTimer(); if(state.idx < questions.length-1){ state.idx++; render(); } else finish(); }

function goBack(){ stopTimer(); if(state.idx === 0){ if(confirm('Exit quiz? Progress will not be saved.')) location.href='dashboard.html'; return; } state.idx--; render(); }

function advanceOrFinish(){ if(state.idx < questions.length-1){ state.idx++; render(); } else finish(); }

function finish(){ stopTimer(); const s = questions.filter(x=>x.user===x.correct).length; const t = questions.length; const pct = (s/t)*100; const msg = pct>=75?'üéâ Excellent!':pct>=50?'üëç Good!':'üìö Keep Learning!'; alert(`${msg}\n\nLevel ${LEVEL} Completed!\nFinal Score: ${s}/${t}\n${pct.toFixed(1)}%`); sessionStorage.setItem(`level${LEVEL}_completed`, 'true');
sessionStorage.setItem("completedLevel", LEVEL);   // üí• REQUIRED for unlocking next level
location.href = 'breathetechnical.html';
 }

document.addEventListener('DOMContentLoaded', ()=>{ render(); });
</script>
</body>
</html>
