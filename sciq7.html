<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Science Quiz ‚Äì Level 7</title>
<style>
body,html{margin:0;padding:0;height:100%;font-family:'Segoe UI',Roboto,Arial}
#app{height:100vh;display:flex;flex-direction:column;background:linear-gradient(135deg,#0b486b,#f56217);color:#fff}
.header{background:linear-gradient(90deg,#0b486b,#f56217);padding:20px;display:flex;justify-content:space-between;align-items:center;font-weight:900}
.progress-bar{height:6px;background:rgba(255,255,255,.18)}
.progress-fill{height:100%;width:25%;transition:width .35s;background:linear-gradient(90deg,#fceabb,#f8b500)}
.content{padding:22px;flex:1;overflow:auto}
.question-text{font-size:2rem;font-weight:900;margin-bottom:22px}
.answer-button{padding:16px;margin-bottom:12px;width:100%;border-radius:12px;border:none;background:linear-gradient(135deg,#b0bec5,#90a4ae);color:#111;font-size:1.1rem;font-weight:800;cursor:pointer}
.answer-button:disabled{opacity:.9}
.correct{background:linear-gradient(135deg,#27ae60,#229954)!important;color:#fff!important}
.incorrect{background:linear-gradient(135deg,#e74c3c,#c0392b)!important;color:#fff!important}
.footer{display:flex;justify-content:space-between;align-items:center;padding:16px;background:rgba(0,0,0,.12)}
.back-button,.next-button{padding:12px 26px;border:none;border-radius:10px;font-weight:900;color:white;cursor:pointer}
.back-button{background:linear-gradient(135deg,#558B2F,#33691e)}
.next-button{background:linear-gradient(135deg,#1976D2,#1565C0);display:none}
.next-button.show{display:block}
</style>
</head>
<body>
<div id="app">
  <div class="header">
    <div id="qnum">üî¨ 1. Question</div>
    <div>‚è≥ <span id="timer">30</span>s</div>
  </div>

  <div class="progress-bar"><div id="progress" class="progress-fill"></div></div>

  <div class="content">
    <div id="qtext" class="question-text"></div>

    <button class="answer-button" onclick="choose(this,'a')"></button>
    <button class="answer-button" onclick="choose(this,'b')"></button>
    <button class="answer-button" onclick="choose(this,'c')"></button>
    <button class="answer-button" onclick="choose(this,'d')"></button>
  </div>

  <div class="footer">
    <div>Score: <span id="score">0</span>/4</div>
    <div style="display:flex;gap:10px;align-items:center">
      <button id="back" class="back-button" onclick="back()" disabled>‚Üê Back</button>
      <button id="next" class="next-button" onclick="nextQ()">Next ‚Üí</button>
    </div>
  </div>
</div>

<script>
const LEVEL = 7;
const TIME = 30;

const Q = [
  { number:1, text:"Which blood vessel carries blood away from the heart?", answers:{a:"Vein", b:"Artery", c:"Capillary", d:"Venule"}, correct:"b", user:null, remaining:TIME },
  { number:2, text:"What is the process by which plants lose water through leaves?", answers:{a:"Transpiration", b:"Respiration", c:"Diffusion", d:"Osmosis"}, correct:"a", user:null, remaining:TIME },
  { number:3, text:"What is H‚ÇÇO commonly known as?", answers:{a:"Salt", b:"Water", c:"Hydrogen peroxide", d:"Oxygen"}, correct:"b", user:null, remaining:TIME },
  { number:4, text:"Which device measures temperature?", answers:{a:"Thermometer", b:"Barometer", c:"Ammeter", d:"Voltmeter"}, correct:"a", user:null, remaining:TIME }
];

let index = 0;
let timer = null;

const qnum = document.getElementById("qnum");
const qtext = document.getElementById("qtext");
const buttons = document.querySelectorAll(".answer-button");
const timerEl = document.getElementById("timer");
const scoreEl = document.getElementById("score");
const nextBtn = document.getElementById("next");
const backBtn = document.getElementById("back");
const progress = document.getElementById("progress");

function render(){
  const q = Q[index];
  qnum.textContent = `üî¨ ${q.number}. Question`;
  qtext.textContent = q.text;
  scoreEl.textContent = Q.filter(x=>x.user===x.correct).length;
  progress.style.width = ((index+1)/Q.length)*100 + "%";

  buttons.forEach((btn,i)=>{
    const key = ["a","b","c","d"][i];
    btn.textContent = `${key}) ${q.answers[key]}`;
    btn.dataset.key = key;
    btn.disabled = q.user !== null;
    btn.classList.remove("correct","incorrect");
    btn.style.opacity = "1";

    if(q.user){
      if(key === q.correct) btn.classList.add("correct");
      else if(key === q.user) btn.classList.add("incorrect");
      else btn.style.opacity = ".5";
    }
  });

  nextBtn.classList[q.user ? "add" : "remove"]("show");
  backBtn.disabled = index === 0;

  timerEl.textContent = q.remaining;
  startTimer();
}

function startTimer(){
  stopTimer();
  const q = Q[index];
  timer = setInterval(()=>{
    q.remaining--;
    timerEl.textContent = q.remaining;
    if(q.remaining <= 0){
      stopTimer();
      timeout();
    }
  },1000);
}

function stopTimer(){ if(timer){ clearInterval(timer); timer=null; } }

function choose(btn,key){
  const q = Q[index];
  if(q.user) return;
  stopTimer();
  q.user = key;
  buttons.forEach(b=>b.disabled=true);
  if(key === q.correct) btn.classList.add("correct");
  else {
    btn.classList.add("incorrect");
    const c = [...buttons].find(b=>b.dataset.key===q.correct);
    if(c) c.classList.add("correct");
  }
  scoreEl.textContent = Q.filter(x=>x.user===x.correct).length;
  setTimeout(()=> nextBtn.classList.add("show"), 400);
}

function timeout(){
  const q = Q[index];
  if(!q.user) q.user = "timeout";
  buttons.forEach(b=>b.disabled=true);
  const c = [...buttons].find(b=>b.dataset.key===q.correct);
  if(c) c.classList.add("correct");
  setTimeout(()=> nextQ(), 700);
}

function nextQ(){
  stopTimer();
  if(index < Q.length - 1){
    index++;
    render();
  } else finish();
}

function back(){
  stopTimer();
  if(index > 0){
    index--;
    render();
  }
}

function finish(){
  stopTimer();
  const s = Q.filter(x=>x.user===x.correct).length;
  const t = Q.length;
  const pct = (s/t)*100;
  const msg = pct>=75 ? 'üéâ Excellent!' : pct>=50 ? 'üëç Good!' : 'üìö Keep Learning!';
  alert(`${msg}\n\nLevel ${LEVEL} Completed!\nFinal Score: ${s}/${t}\n${pct.toFixed(1)}%`);

  sessionStorage.setItem("completedLevel", LEVEL);
  location.href = "scilevel.html";
}

document.addEventListener('DOMContentLoaded', ()=>{ render(); });
</script>
</body>
</html>
